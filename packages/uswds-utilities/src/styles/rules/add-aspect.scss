/*
========================================
ASPECT
----------------------------------------
usage:
  .aspect-[value]
----------------------------------------
output:
  padding-left: 0;
  padding-right: 0;
  padding-top: 0;
  padding-bottom: 100%;
----------------------------------------
example:
  .aspect-16x9
----------------------------------------
*/

@use "uswds-core/src/styles/settings" as *;
@use "uswds-core/src/styles/mixins/general/add-aspect" as *;
@use "uswds-core/src/styles/functions/general/map-deep-get" as *;

$add-aspect: (
  add-aspect: (
    base: "add-aspect",
    modifiers: null,
    values: (
      9x16: (
        slug: "9x16",
        isReadable: true,
        content: relative,
        extend: (
          "aspect-ratio": "9 / 16",
        ),
      ),
      1x1: (
        slug: "1x1",
        isReadable: true,
        content: relative,
        extend: (
          "aspect-ratio": 1,
        ),
      ),
      4x3: (
        slug: "4x3",
        isReadable: true,
        content: relative,
        extend: (
          "aspect-ratio": "4 / 3",
        ),
      ),
      16x9: (
        slug: "16x9",
        isReadable: true,
        content: relative,
        extend: (
          "aspect-ratio": "16 / 9",

        ),
      ),
      2x1: (
        slug: "2x1",
        isReadable: true,
        content: relative,
        extend: (
          "aspect-ratio": 2,
        ),
      ),
    ),
    settings: $add-aspect-settings,
    property: "position",
    type: "object",
  ),
);

@each $aspect-key, $aspect-value in map-deep-get(
  $add-aspect,
  add-aspect,
  values
) {
  .add-aspect-#{$aspect-key} {
    @include add-aspect-children;
    max-width: 100%;
    overflow: hidden;
  }
}

// Safari and firefox require a width attribute on img elements for aspect-ratio to work
// using :where() to reduce specificity in case a width utility class is added
:where(img[class*=add-aspect-]) {
  width: min-content;
}
