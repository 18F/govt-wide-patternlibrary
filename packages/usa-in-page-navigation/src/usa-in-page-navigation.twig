{% macro inpagenav(items, base_class) %}

  {% set list_item_class = 'usa-in-page-nav__item' %}
  {% set current_class = 'usa-current' %}

  <aside class="usa-in-page-nav"
    data-title-text="On this page"
    data-title-heading-level="h4"
    data-scroll-offset="0"
    data-root-margin="0px 0px 0px 0px"
    data-threshold="1"
    {% if mainContentSelector %}
      data-main-content-selector=".main-content"
    {% endif %}
  ></aside>

  <main class="usa-prose">
    <div class="main-content">
      {% if heading %}
        <h1>{{ heading }}</h1>
      {% endif %}

      {% if items %}
        {% for item in items %}
          {% if item.is_subheading %}
            <h3>{{ item.section_heading }}</h3>
          {% else %}
            <h2>{{ item.section_heading }}</h2>
          {% endif %}
          {{ item.content }}
        {% endfor %}
      {% endif %}

      <!-- These headers are hidden and should always be excluded from in-page navigation -->
      <h2 style="display:none">This header is hidden with display:none and should not appear in the in-page nav</h2>
      <h2 style="visibility:hidden">This header is hidden with visibility:hidden and should not appear in the in-page nav</h2>
    </div>

    <!-- This header exists outside of the class defined in data-main-content-selector -->
    <h2>This heading should be excluded if custom content selector is used</h2>

    <div class="main-content">
      <!-- This header exists inside the class defined in data-main-content-selector -->
      <h2>This heading should be included whether custom content selector is used or not</h2>
    </div>
  </main>

{% endmacro %}

{% import _self as inpagenav %}

<div class="usa-in-page-nav-container">
  {{ inpagenav.inpagenav(items, 'usa-in-page-navigation') }}
</div>
