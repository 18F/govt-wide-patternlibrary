$theme-banner-font: sans;

.#{ns('component')}banner {
  @include bg('gray', 'lighter');
  @include at-media('mobile-lg') {
    @include padding-bottom(0);
    @include size($theme-banner-font, '3xs')
  }
}

.#{ns('component')}banner-content {
  @include bg('transparent');
  @include padding-bottom(105);
  @include padding-top(2px);
  @include padding-x(1);
  @include size($theme-banner-font, 3);
  @include width('full');
  @include at-media('tablet') {
    @include padding-y(3);
  }

  @include at-media('desktop') {
    @include padding-x($theme-site-margins);
  }

  p {
    &:first-child {
      @include margin(0);
    }
  }
}

.#{ns('component')}banner-guidance-gov {
  @include padding-top(2);
  @include at-media('tablet'){
    @include padding-top(0);
  }
}

.#{ns('component')}banner-guidance-ssl {
  @include padding-top(2);
  @include at-media('tablet'){
    @include padding-top(0);
  }
}

.#{ns('component')}banner-inner {
  // TODO: outer-container; grid mixins
  @include flex('align-start');
  @include outer-container($site-max-width);
  @include padding-left($theme-site-margins-mobile);
  @include padding-right(0);
  @include padding-x(1);
  @include at-media('desktop') {
    @include padding-x($theme-site-margins);
  }
}

.#{ns('component')}banner-header {
  @include padding-y(1);
  @include position('relative');
  @include size($theme-banner-font, 1);
  @include text('normal');
  @include at-media('mobile-lg') {
    @include padding-y(0);
  }

  &-text{
    @include line-height($theme-banner-font, 2);
    @include margin-y(0);
    @include size($theme-banner-font, '3xs');

    .#{ns('component')}banner-header-expanded & {
      @include display('none');
    }
  }

  &-action{
    @include display-icon(angle-arrow-down-primary, after, spacing(1), 0, hover);
    @include line-height($theme-banner-font, 2)
    @include margin-bottom(0);
    @include margin-top(2px);
    @include color('primary');

    .#{ns('component')}banner-header-expanded & {
      @include display('none');
    }

    &:after {
      @include margin-left('05');
    }
  }

  &-flag{
    @include float('left');
    @include margin-right(1);
    @include width(2);
    @include at-media('mobile-lg') {
      @include margin-right(1);
      @include padding-top(0);
      @include width(205);
    }
  }

  .#{ns('component')}banner-header-expanded & {
    @include display('none');
  }
}

.#{ns('component')}banner-header-expanded {
  @include at-media('mobile-lg') {
    @include border-bottom(0);
    @include display('block');
    @include minh(0);
    @include padding-right(0);
    @include size($theme-banner-font, 1);
    @include text('normal');
  }

  > .usa-banner-inner {
    @include margin-left(0);
    @include at-media('mobile-lg') {
      @include margin-left('auto');
    }
  }

  img {
    @include margin-right(3);
    @include at-media('mobile-lg') {
      @include margin-right(1);
    }
  }

  p {
    @include line-height($theme-banner-font, 2);
    @include vertical-align('top');
    @include at-media('mobile-lg') {
      @include line-height($theme-banner-font, 4);
      @include vertical-align('middle');
    }
  }
}

.#{ns('component')}banner-button {
  @include button-unstyled;
  @include bottom(0);
  @include color('primary');
  @include display('block');
  @include left(0);
  @include position('absolute');
  @include size($theme-banner-font, 1);
  @include top(0);
  @include width('full');
  @include at-media('mobile-lg') {
    @include display('inline');
    @include height('auto');
    @include margin-left('05');
    @include padding-top(0);
    @include padding-left(0);
    @include position('relative');
    @include vertical-align('middle');
    @include width('auto');
  }

  &:hover {
    @include color('primary', 'darker');
    @include text('underline');
  }

  &[aria-expanded=false] {
    background-image: none;
  }

  &[aria-expanded=true] {
    @include display-icon(close, after, spacing(105), 0, no-hover);
    background-image: none;
    @include at-media('tablet') {
      @include display-icon(angle-arrow-up-primary, after, spacing(1), 0, hover);
      height: initial;
      @include padding(0);
      @include position('relative');

      &::after {
        background-position-y: 1px;
      }
    }

    &::after {
      @include position('absolute');
      @include right(2);
      @include top(105);
      @include at-media('tablet') {
        @include position('static');
      }
    }

    .#{ns('component')}banner-button-text {
      @include display('none');
      @include at-media('tablet') {
        @include display('inline');
      }
    }
  }
}

.#{ns('component')}banner-icon {
  @include width(5);
}
