// Alert variables ---------- //
// TODO: Custom alerts are effectively hidden and not well supported
// Consider removing or rebuilding
$usa-custom-alerts: () !default;
$usa-custom-alerts-bar: () !default;

$usa-alerts: (
  info: "info-lighter",
  emergency: "emergency",
);

$usa-alerts-bar: (
  info: "info",
  emergency: "emergency-dark",
);

$alerts: map-merge($usa-alerts, $usa-custom-alerts);
$alerts-bar: map-merge($usa-alerts-bar, $usa-custom-alerts-bar);

.usa-site-alert {
  position: relative;
  background-color: color("base-lightest");

  .usa-alert {
    @include grid-container($theme-site-alert-max-width);

    &::before {
      display: none;
    }

    > .usa-list,
    .usa-alert__body > .usa-list {
      padding-left: 2ch;
    }
  }

  .usa-alert__body {
    display: block;

    @include at-media("tablet") {
      position: relative;
    }
  }
}

.usa-site-alert__close-btn {
  display: none;
  line-height: units(1.5);
  padding: units(1.5);
  position: absolute;
  right: 0;
  text-decoration: none;
  top: 0;

  @include at-media("tablet") {
    padding: 0;
  }

  img {
    width: units(1.5);
  }

  &:hover {
    text-decoration: none;
  }
}

.usa-site-alert--close-btn-active {
  .usa-site-alert__close-btn {
    display: block;
    width: auto;
  }

  .usa-alert__body {
    padding-right: units(1.5);
  }
}

@each $name, $bgcolor in $alerts {
  .usa-site-alert--#{$name} {
    $banner-text-color-token: get-token-from-bg($bgcolor);

    background-color: color($bgcolor);
    color: color($banner-text-color-token);

    .usa-site-alert__close-btn {
      $close-btn-background: color(map-get($alerts-bar, $name));
      $close-btn-color-token: get-token-from-bg($close-btn-background);

      background-color: $close-btn-background;
      color: color($close-btn-color-token);

      @include at-media("tablet") {
        background-color: color($bgcolor);
        color: color($banner-text-color-token);
      }
    }

    .usa-alert {
      @include alert-status-styles($name, $bgcolor);
    }
  }
}
