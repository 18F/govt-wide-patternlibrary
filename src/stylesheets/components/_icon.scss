$tokens-icon-sizes: (
  "3": 3,
  "4": 4,
  "5": 5,
  "6": 6,
  "7": 7,
  "8": 8,
  "9": 9,
);

$icon-inline-size-magic-number: 1em;
$icon-min-padding: 1em * divide(2, 24);

.usa-icon {
  display: inline-block;
  fill: currentColor;
  height: $icon-inline-size-magic-number;
  position: relative;
  width: $icon-inline-size-magic-number;

  .usa-button > &:first-child {
    float: left;
    margin-top: -0.5 *
      ($icon-inline-size-magic-number - lh($theme-button-font-family, 1));
    margin-bottom: -0.5 *
      ($icon-inline-size-magic-number - lh($theme-button-font-family, 1));
    margin-right: 0.25rem;
  }

  .usa-button:not(.usa-button--unstyled) > &:first-child {
    margin-left: -1 * $icon-min-padding;
    margin-right: #{0.5em - $icon-min-padding};
  }
}

@each $token, $units in $tokens-icon-sizes {
  .usa-icon--size-#{$units} {
    @include u-square($units);
  }
}
