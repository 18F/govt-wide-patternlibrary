$theme-anchor-background-color: "base-darkest";
$theme-anchor-min-width: "tablet";
$theme-anchor-gap: 4;
$theme-site-domain: "my-domain";

$anchor-icon-colors: get-link-tokens-from-bg(
  $theme-anchor-background-color,
  $theme-link-reverse-color
);

$anchor-icon-color: nth($anchor-icon-colors, 1);
$anchor-icon-hover: nth($anchor-icon-colors, 2);

// Need to create variants for IE11 so users can update background
// and have the icon and link colors automatically update.
$anchor-icon-external-link: (
  "name": "external-link",
  "svg-height": 40,
  "svg-width": 40,
  "height": 0.65em,
  "color": $anchor-icon-color,
  "color-hover": $anchor-icon-hover
);

// Ugly selector, but we're looking for external links that aren't
// wrapping identifier logos
$external-link-qualifier: ":not([href*=#{$theme-site-domain}]):not(.usa-anchor__branding-img)";

//
// General Styles
// =====================================
.usa-anchor {
  @include set-text-and-bg($theme-anchor-background-color);

  a {
    @include set-link-from-bg($theme-anchor-background-color);
  }

  // Only external links
  a[href^="http:"]#{$external-link-qualifier},
  a[href^="https:"]#{$external-link-qualifier} {
    @include place-icon(
      $anchor-icon-external-link,
      "after",
      "2px",
      baseline,
      $theme-anchor-background-color
    );
  }
}

//
// Primary Section
// =====================================
.usa-anchor__primary-section {
  padding-top: units(2.5);
  padding-bottom: units(2.5);

  @include at-media($theme-breadcrumb-min-width) {
    padding-bottom: units(1.5);
  }
}

// Branding
// =====================================
.usa-anchor__branding {
  margin-bottom: units(2);

  @include at-media($theme-anchor-min-width) {
    @include grid-row;
    @include grid-gap;
    @include u-align-items("align-center");
  }
}

.usa-anchor__branding-img:not(:only-child) {
  margin-bottom: units(2);
  @include u-text-decoration("no-underline");

  @include at-media($theme-anchor-min-width) {
    margin-bottom: 0;
  }
}

.usa-anchor__branding-img {
  @include media-block-img($margin-right: units(0));
  display: inline-flex;
}

.usa-anchor__branding-img img {
  width: units(7);
  height: units(7);
  object-fit: contain;
}

.usa-anchor__branding-description {
  flex: 1 1 0%;
}

// Required links
// =====================================
.usa-anchor__required-links-list {
  @include u-margin-y(0);
  list-style: none;
  padding-left: 0;

  @include at-media($theme-anchor-min-width) {
    @include grid-row;
    @include grid-gap($theme-anchor-gap);
    @include u-flex("align-start");
  }
}

.usa-anchor__required-links-item {
  margin-bottom: units(1.5);
}

.usa-anchor__required-links-item {
  @include at-media($theme-anchor-min-width) {
    @include grid-col(6);
  }
}

//
// Secondary Section
// =====================================
.usa-anchor__secondary-section {
  padding-top: units(1.5);
  padding-bottom: units(1.5);
  border-top: 1px solid color("gray-5");
}

.usa-anchor__secondary-section .usa-link {
  @include u-margin-left(1);
}
