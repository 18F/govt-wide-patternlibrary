/*
----------------------------------------
typeset()
----------------------------------------
Sets:
- family
- size
- line-height
----------------------------------------
*/

@mixin typeset(
  $family: $theme-body-font-family,
  $scale: $theme-body-font-size,
  $line-height: $theme-body-line-height
) {
  $family: if(
    $family == null,
    $theme-body-font-family,
    $family
  );
  $scale: if(
    $scale == null,
    $theme-body-font-size,
    $scale
  );
  $line-height: if(
    $line-height == null,
    $theme-body-line-height,
    $line-height
  );
  @include u-font($family, $scale);
  @include u-line-height($family, $line-height);
}

@mixin typeset-heading {
  @include u-margin-y(0);
  clear: both;

  * + & {
    margin-top: 1.5em;  // TODO: add as var to settings?
  }

  + * {
    margin-top: 1em;
  }
}

// typeset element mixins
@mixin typeset-p {
  line-height: line-height(
    $theme-body-font-family,
    $theme-body-line-height
  );
  margin-bottom: 0;
  margin-top: 0;
  max-width: measure($theme-text-measure);

  * + & {
    margin-top: 1em;  // TODO: add as var to settings?
  }

  + * {
    margin-top: 1em;
  }
}

@mixin typeset-link {
  color: color($theme-link-color);
  text-decoration: underline;

  &:hover {
    color: color($theme-link-hover-color);
  }

  &:active {
    color: color($theme-link-active-color);
  }

  &:focus {
    @include focus-outline;
  }

  &:visited {
    color: color($theme-link-visited-color);
  }
}

@mixin heading-3xl {
  @include typeset(
    $theme-heading-3xl-font-family,
    $theme-heading-3xl-font-size,
    $theme-heading-3xl-line-height
  );
  @each $token in $theme-heading-3xl-text-styles {
    @include u-text($token);
  }
}

@mixin typeset-heading-3xl {
  @include typeset-heading;
  @include heading-3xl;
}

@mixin heading-2xl {
  @include typeset(
    $theme-heading-2xl-font-family,
    $theme-heading-2xl-font-size,
    $theme-heading-2xl-line-height
  );
  @each $token in $theme-heading-2xl-text-styles {
    @include u-text($token);
  }
}

@mixin typeset-heading-2xl {
  @include typeset-heading;
  @include heading-2xl;
}

@mixin heading-xl {
  @include typeset(
    $theme-heading-xl-font-family,
    $theme-heading-xl-font-size,
    $theme-heading-xl-line-height
  );
  @each $token in $theme-heading-xl-text-styles {
    @include u-text($token);
  }
}

@mixin typeset-heading-xl {
  @include typeset-heading;
  @include heading-xl;
}

@mixin heading-lg {
  @include typeset(
    $theme-heading-lg-font-family,
    $theme-heading-lg-font-size,
    $theme-heading-lg-line-height
  );
  @each $token in $theme-heading-lg-text-styles {
    @include u-text($token);
  }
}

@mixin typeset-heading-lg {
  @include typeset-heading;
  @include heading-lg;
}

@mixin heading-md {
  @include typeset(
    $theme-heading-md-font-family,
    $theme-heading-md-font-size,
    $theme-heading-md-line-height
  );
  @each $token in $theme-heading-md-text-styles {
    @include u-text($token);
  }
}

@mixin typeset-heading-md {
  @include typeset-heading;
  @include heading-md;
}

@mixin heading-sm {
  @include typeset(
    $theme-heading-sm-font-family,
    $theme-heading-sm-font-size,
    $theme-heading-sm-line-height
  );
  @each $token in $theme-heading-sm-text-styles {
    @include u-text($token);
  }
}

@mixin typeset-heading-sm {
  @include typeset-heading;
  @include heading-sm;
}

@mixin heading-xs {
  @include typeset(
    $theme-heading-xs-font-family,
    $theme-heading-xs-font-size,
    $theme-heading-xs-line-height
  );
  @each $token in $theme-heading-xs-text-styles {
    @include u-text($token);
  }
}

@mixin typeset-heading-xs {
  @include typeset-heading;
  @include heading-xs;
}

@mixin heading-2xs {
  @include typeset(
    $theme-heading-2xs-font-family,
    $theme-heading-2xs-font-size,
    $theme-heading-2xs-line-height
  );
  @each $token in $theme-heading-2xs-text-styles {
    @include u-text($token);
  }
}

@mixin typeset-heading-2xs {
  @include typeset-heading;
  @include heading-2xs;
}

@mixin heading-3xs {
  @include typeset(
    $theme-heading-3xs-font-family,
    $theme-heading-3xs-font-size,
    $theme-heading-3xs-line-height
  );
  @each $token in $theme-heading-3xs-text-styles {
    @include u-text($token);
  }
}

@mixin typeset-heading-3xs {
  @include typeset-heading;
  @include heading-3xs;
}
