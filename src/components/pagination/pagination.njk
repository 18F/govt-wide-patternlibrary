{% from "pagination/_pagination-link.njk" import paginationLink %}


{# TODO - Create macro #}
{% set sprite_path = uswds.path + "/img/sprite.svg" %}


{% set
  first_two_pager_items = range(1, pagination.items - (pagination.items - 3))
%}
{%
  set last_two_pager_items = range(pagination.items - 1, pagination.items + 1)
%}

<nav aria-label="pagination" class="usa-pagination">
  <span class="usa-pagination__label">
    Showing 1 of {{ pagination.items }} total pages
  </span>

  <ul class="usa-pagination__list">
    {# Previous buttons #}
    <li class="usa-pagination__item usa-pagination__previous-group">
      <a href="{{ placeholder_link }}" class="usa-pagination__link" aria-label="First group">
        <svg class="usa-icon" aria-hidden="true" role="img">
          <use xlink:href="{{ sprite_path }}#first_page"></use>
        </svg>
      </a>
    </li>
    <li class="usa-pagination__item usa-pagination__previous-page">
      <a href="{{ placeholder_link }}" class="usa-pagination__link" aria-label="Previous page">
        <svg class="usa-icon" aria-hidden="true" role="img">
          <use xlink:href="{{ sprite_path }}#navigate_before"></use>
        </svg>
        <span class="usa-pagination__button-text">Previous</span>
      </a>
    </li>

    {# Page numbers #}
    {% if pagination.items <= 4 %}

      {# List all of them if less than 4 #}
      {% for item in range(1, pagination.items + 1) %}
        <li class="usa-pagination__item usa-pagination__page-no">
          {{ paginationLink(item, pagination.current) }}
        </li>
      {% endfor %}
    {% else %}
      {# Otherwise show first and last 2 #}
      {% for item in first_two_pager_items %}
        <li class="usa-pagination__item usa-pagination__page-no">
          {{ paginationLink(item, pagination.current) }}
        </li>
      {% endfor %}

      <li class="usa-pagination__item">
        <span class="usa-pagination__ellipsis" aria-label="X pages in between">
          â€¦
        </span>
      </li>

      {% for item in last_two_pager_items %}
        <li class="usa-pagination__item usa-pagination__page-no">
          {{ paginationLink(item, pagination.current) }}
        </li>
      {% endfor %}
    {% endif %}


    {# Next buttons #}
    <li class="usa-pagination__item usa-pagination__next-page">
      <a href="{{ placeholder_link }}" class="usa-pagination__link" aria-label="Next page">
        <span class="usa-pagination__button-text">Next</span>
        <svg class="usa-icon" aria-hidden="true" role="img">
          <use xlink:href="{{ sprite_path }}#navigate_next"></use>
      </svg>
      </a>
    </li>
    <li class="usa-pagination__item usa-pagination__next-group">
      <a href="{{ placeholder_link }}" class="usa-pagination__link" aria-label="Next group">
        <svg class="usa-icon" aria-hidden="true" role="img">
          <use xlink:href="{{ sprite_path }}#last_page"></use>
        </svg>
      </a>
    </li>
  </ul>

  <a href="{{ placeholder_link }}" class="usa-pagination__view-all usa-link" aria-label="View all pages">
    View all
  </a>
</nav>
