@mixin set-link-from-bg(
  $bg-color: "default",
  $preferred-link-color: "default",
  $fallback-link-color: "default",
  $wcag-target: "AA",
  $context: false
) {
  $link-tokens: get-link-tokens-from-bg(
    $bg-color,
    $preferred-link-color,
    $fallback-link-color,
    $wcag-target,
    $context
  );
  $bg-color: if(
    $bg-color == "default",
    $theme-body-background-color,
    $bg-color
  );
  $link-token: nth($link-tokens, 1);
  $hover-token: nth($link-tokens, 2);
  $visited-token: if(
    abs(calculate-grade($theme-link-visited-color) - calculate-grade($bg-color))
      < 50,
    $link-token,
    $theme-link-visited-color
  );
  color: color($link-token);
  &:visited {
    color: color($visited-token);
  }
  &:hover,
  &:active {
    color: color($hover-token);
  }
}
